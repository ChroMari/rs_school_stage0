(()=>{"use strict";var e={239:(e,t,s)=>{s.r(t)},920:(e,t,s)=>{s.r(t)},296:(e,t,s)=>{s.r(t)},831:(e,t,s)=>{s.r(t)},45:(e,t,s)=>{s.r(t)},198:(e,t,s)=>{s.r(t)},572:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.CanvasWrapper=void 0;const i=s(916);s(239),t.CanvasWrapper=class{constructor(){this.filtering=(e,t,s)=>{var i,n;const a=e.toLowerCase().replace(" ","_");this.filtersCanvas[a]=`(${t}${s})`,this.resultFiltersCanvas="",Object.keys(this.filtersCanvas).map((e=>(this.resultFiltersCanvas+=`${e.replace("_","-")}${this.filtersCanvas[e]} `,e))),this.resultFiltersCanvas=this.resultFiltersCanvas.trim(),this.ctx&&(this.ctx.filter=this.resultFiltersCanvas),null===(i=this.ctx)||void 0===i||i.clearRect(0,0,this.canvas.width,this.canvas.height),null===(n=this.ctx)||void 0===n||n.drawImage(this.img,0,0)},this.save=()=>{const e=document.createElement("a");e.href=this.canvas.toDataURL(String(this.img)),e.download="image.png",e.click()},this.drawing=e=>{this.img=new Image,this.img.setAttribute("crossorigin","anonymous"),this.img.src=e.src,this.img.onload=()=>{var t,s;this.canvas.width=e.width,this.canvas.height=e.height,null===(t=this.ctx)||void 0===t||t.clearRect(0,0,this.canvas.width,this.canvas.height),0!==this.resultFiltersCanvas.length&&this.ctx&&(this.ctx.filter=this.resultFiltersCanvas),null===(s=this.ctx)||void 0===s||s.drawImage(this.img,0,0)}},this.render=()=>this.canvas,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.img=new Image,this.filtersCanvas=i.filtersCanvas,this.resultFiltersCanvas=""}}},638:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedItem=void 0,t.SelectedItem=class{constructor(e,t){this.renderFilterCanvas=e=>{const t=this.canvas.getContext("2d");this.canvas.width=e.width,this.canvas.height=e.height,t&&(t.filter=this.filterCanvas,t.drawImage(e,0,0))},this.render=()=>{this.select.classList.add("selected-item");const e=document.createElement("div");e.classList.add("selected-item__canvas"),this.select.appendChild(e),e.appendChild(this.canvas);const t=document.createElement("h4");return t.classList.add("selected-item__title"),t.textContent=this.title,this.select.appendChild(t),this.select},this.select=document.createElement("div"),this.title=e,this.filterCanvas=t.join(" "),this.canvas=document.createElement("canvas")}}},212:function(e,t,s){var i=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.SelectedWrapper=void 0;const n=i(s(942)),a=s(638);s(45),t.SelectedWrapper=class{constructor(e){this.activeSelect=(e,t)=>{t.map((e=>e.classList.remove("selected-item--active"))),this.selectedArrays[e].filterCanvas.split(" ").forEach(((e,t)=>{const s=parseInt(e.replace(/[^\d]/g,""),10);this.filters[t].input.value=String(s),this.filters[t].newCount()})),t[e].classList.add("selected-item--active")},this.render=()=>{const e=document.createElement("div");return e.classList.add("selected-wrapper"),n.default.map(((t,s)=>{const{name:i,filter:n}=t;return this.selectedArrays.push(new a.SelectedItem(i,n)),this.filterRenders.push(this.selectedArrays[s].render()),e.appendChild(this.filterRenders[s]),t})),this.filterRenders[0].classList.add("selected-item--active"),this.filterRenders.forEach(((e,t)=>{e.addEventListener("click",(()=>this.activeSelect(t,this.filterRenders)))})),e},this.selectedArrays=[],this.filters=e,this.filterRenders=[]}}},37:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterItem=void 0,t.FilterItem=class{constructor(e,t,s,i,n,a){this.newCount=()=>{this.labelCount.textContent=this.input.value,this.filteringCanvas(this.title,this.input.value,this.unit)},this.resetCount=()=>{this.labelCount.textContent=String(this.state),this.input.value=String(this.state),this.filteringCanvas(this.title,String(this.state),this.unit)},this.render=()=>{const e=document.createElement("aside"),t=document.createElement("label");t.classList.add("filter__subtitle"),t.setAttribute("for",this.title.replace(" ","")),e.appendChild(t);const s=document.createElement("span");s.textContent=this.title.replace("-"," "),t.appendChild(s),this.labelCount.textContent=String(this.value),t.appendChild(this.labelCount),this.input.classList.add("filter__input"),this.input.id=this.title.replace(" ",""),this.input.type="range",this.input.min=String(this.min),this.input.max=String(this.max),this.input.value=String(this.value),e.appendChild(this.input);let i=!1;return this.input.onchange=this.newCount,this.input.onmousedown=()=>{i=!0},this.input.onmousemove=()=>i&&this.newCount(),this.input.onmouseout=()=>{i=!1},e},this.min=e,this.max=t,this.value=s,this.title=i,this.unit=n,this.labelCount=document.createElement("span"),this.state=s,this.filteringCanvas=a,this.input=document.createElement("input")}}},607:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.FilterWrapper=void 0;const i=s(633);s(920);const n=s(37),a=s(471);t.FilterWrapper=class{constructor(e){this.render=()=>{const e=document.createElement("section");e.classList.add("filter");const t=document.createElement("div");return t.classList.add("filter-inner"),e.appendChild(t),this.title=a.filterTitle(this.title),t.appendChild(this.title),i.filterInput.forEach(((t,s)=>{const{min:i,max:a,value:r,typeFilter:l,unit:d}=t,o=new n.FilterItem(i,a,r,l,d,this.filteringCanvas);this.filters.push(o),e.appendChild(this.filters[s].render())})),this.buttonReset.classList.add("filter-inner__button"),this.buttonReset.textContent="Reset",t.appendChild(this.buttonReset),e},this.title=document.createElement("h2"),this.filters=[],this.filteringCanvas=e,this.buttonReset=document.createElement("button")}}},471:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterTitle=void 0,t.filterTitle=e=>{const t=e;return t.classList.add("filter-inner__title"),t.textContent="FILTER - Normal",t}},627:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.DownlandButton=void 0,t.DownlandButton=class{constructor(e,t,s){this.downland=e=>{const t=new FileReader;t.onload=()=>{const e=document.createElement("img");e.src=String(t.result),this.body.style.backgroundImage=`url(${e.src})`,e.onload=()=>{this.drawingCanvas(e),this.selectedArrays.map((t=>(t.renderFilterCanvas(e),t)))}},e.files&&t.readAsDataURL(e.files[0])},this.render=()=>{const e=document.createElement("label");e.classList.add("header__button-load","header__button");const t=document.createElement("input");t.classList.add("header__input"),t.type="file",e.appendChild(t),e.onchange=()=>this.downland(t);const s=document.createElement("span");return s.textContent="Load picture",e.appendChild(s),e},this.body=e,this.drawingCanvas=t,this.selectedArrays=s}}},874:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.NextButton=void 0,t.NextButton=class{constructor(e,t,s){this.nextImage=()=>{this.index+1===21&&(this.index=1);const e=new Date,t=this.index<10?`0${this.index}`:`${this.index}`,s=`https://raw.githubusercontent.com/rolling-scopes-school/stage1-tasks/assets/images/${["night","morning","day","evening"][Math.floor(e.getHours()/6)]}/${t}.jpg`,i=new Image;i.src=s,i.onload=()=>{this.body.style.backgroundImage=`url(${i.src})`,this.drawingCanvas(i),this.selectedArrays.map((e=>(e.renderFilterCanvas(i),e)))},this.index+=1},this.render=()=>{const e=document.createElement("button");return e.classList.add("header__button-next","header__button"),e.textContent="Next picture",e.onclick=this.nextImage,e},this.index=1,this.body=e,this.drawingCanvas=t,this.selectedArrays=s}}},961:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.SaveButton=void 0,t.SaveButton=class{constructor(e){this.save=()=>this.saveCanvas(),this.render=()=>{const e=document.createElement("button");return e.classList.add("header__button-save","header__button"),e.textContent="Save picture",e.onclick=this.save,e},this.a=document.createElement("a"),this.saveCanvas=e}}},53:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.headerView=void 0;const i=s(627),n=s(874),a=s(961),r=s(2);t.headerView=(e,t,s,l)=>{const d=document.createElement("header");d.classList.add("header");const o=document.createElement("div");o.classList.add("header-inner"),d.appendChild(o);const c=new i.DownlandButton(e,t,l),h=new a.SaveButton(s),u=new n.NextButton(e,t,l);return u.nextImage(),o.appendChild(c.render()),o.appendChild(h.render()),d.appendChild(r.title()),d.appendChild(u.render()),d}},2:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.title=void 0,t.title=()=>{const e=document.createElement("h1");return e.classList.add("header__title"),e.textContent="Photo filter",e}},916:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filtersCanvas=void 0,t.filtersCanvas={blur:"(0px)",invert:"(0%)",sepia:"(0%)",saturate:"(100%)",hue_rotate:"(0deg)",brightness:"(100%)",contrast:"(100%)"}},633:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.filterInput=void 0,t.filterInput=[{min:0,max:10,value:0,typeFilter:"Blur",unit:"px"},{min:0,max:100,value:0,typeFilter:"Invert",unit:"%"},{min:0,max:100,value:0,typeFilter:"Sepia",unit:"%"},{min:0,max:300,value:100,typeFilter:"Saturate",unit:"%"},{min:0,max:360,value:0,typeFilter:"Hue-rotate",unit:"deg"},{min:0,max:200,value:100,typeFilter:"Brightness",unit:"%"},{min:0,max:200,value:100,typeFilter:"Contrast",unit:"%"}]},942:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.default=[{name:"normal",filter:["blur(0px)","invert(0%)","sepia(0%)","saturate(100%)","hue-rotate(0deg)","brightness(100%)","contrast:(100%)"]},{name:"black & white",filter:["blur(0px)","invert(0%)","sepia(0%)","saturate(0%)","hue-rotate(0deg)","brightness(150%)","contrast(150%)"]},{name:"sepia",filter:["blur(0px)","invert(0%)","sepia(100%)","saturate(150%)","hue-rotate(0deg)","brightness(100%)","contrast(150%)"]},{name:"warm colors",filter:["blur(0px)","invert(0%)","sepia(50%)","saturate(200%)","hue-rotate(15deg)","brightness(100%)","contrast(150%)"]},{name:"cold colors",filter:["blur(0px)","invert(0%)","sepia(75%)","saturate(300%)","hue-rotate(180deg)","brightness(100%)","contrast(150%)"]},{name:"green color tint",filter:["blur(0px)","invert(0%)","sepia(75%)","saturate(300%)","hue-rotate(30deg)","brightness(100%)","contrast(150%)"]}]},737:(e,t,s)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.modalView=void 0,s(831),t.modalView=()=>{const{body:e}=document,t=document.createElement("div");t.classList.add("modal");const s=document.createElement("div");s.classList.add("modal-dialog"),t.appendChild(s);const i=document.createElement("div");i.classList.add("modal-content"),s.appendChild(i);const n=document.createElement("div");n.classList.add("modal-header"),i.appendChild(n);const a=document.createElement("h3");a.textContent="photofilter",a.classList.add("modal-title"),n.appendChild(a);const r=document.createElement("button");r.type="button",r.textContent="×",r.classList.add("close"),n.appendChild(r);const l=document.createElement("div");l.classList.add("modal-body"),i.appendChild(l),l.innerHTML+='<div class="modal-item">\n  <h5>Базовый функционал приложения:</h5>\n  <p>[+10] Есть возможность выбрать значение для фильтра по средствам сдвига бегунка.</p>\n</div>\n<div class="modal-item">\n  <h5>Обязательный дополнительный фукционал:</h5>\n  <p>[+10] Есть присеты для фотографии. При выборе миниатюры пресета такие же фильтры применяются к основному фото</p>\n</div>\n<div class="modal-item">\n  <h5>Дополнительный функционал на выбор:</h5>\n  <p>[+10] перелистывание фото</p>\n  <p>[+10] загрузка в приложение фото с компьютера</p>\n  <p>[+10] сохранение фото на компьютер вместе с наложенными фильтрами</p>\n  <p>[+10] сброс фильтров кликом на кнопку</p>\n  <p>возможность открыть приложение в полноэкранном режиме</p>\n  \n</div>';const d=document.createElement("button");d.classList.add("button-open"),d.textContent="Самоценка",d.onclick=()=>{t.parentNode===e?e.removeChild(t):e.appendChild(t)},r.onclick=()=>{e.removeChild(t)},e&&e.appendChild(d)}}},t={};function s(i){var n=t[i];if(void 0!==n)return n.exports;var a=t[i]={exports:{}};return e[i].call(a.exports,a,a.exports,s),a.exports}s.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{s(296),s(198);const e=s(572),t=s(212),i=s(607),n=s(53),a=s(737),r=document.getElementById("root"),{body:l}=document;a.modalView();const d=new e.CanvasWrapper,o=document.createElement("div");o.classList.add("content-wrapper");const c=new i.FilterWrapper(d.filtering);o.appendChild(c.render());const h=new t.SelectedWrapper(c.filters);c.buttonReset.onclick=()=>{c.filters.map((e=>e.resetCount())),h.activeSelect(0,h.filterRenders)};const u=n.headerView(l,d.drawing,d.save,h.selectedArrays),p=document.createElement("div");p.classList.add("drawing-wrapper"),o.appendChild(p),p.appendChild(d.render()),p.appendChild(h.render()),r&&(r.appendChild(u),r.appendChild(o))})()})();